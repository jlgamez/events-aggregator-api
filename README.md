# events-aggregator-api
A Spring Boot based backend to query, and create city events in a SQL database
## OS used for development
MacOS Monterrey v.12

##Prerequisites
* Have a MySQL server running on port 3306
* Create a MySQL database named "events_db"
* Apache Maven 3.8.5
* JDK 17.0.2

##Start the Backend server
1. In `src/main/resources/application.properties` add your root password for your MySQL server.
2. In the project folder, run `mvn clean install`.
3. Run `src/main/java/com/jlgamez/eventAgregatorApp/EventsAgregatorApp.java` main method on your IDE.

##API usage
You can use a tool like postman to make requests to the following endpoints

| Endpoint                                                                                | Body example (if needed)                                                                                                                                                                                                                              | Description                                                                          |
|-----------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
| GET http://localhost:8080/api/activities                                                |                                                                                                                                                                                                                                                       | Returns a list with all activities in the database                                   |
| POST http://localhost:8080/api/activities/add-new                                       | {"title":"This is a new activity title","description":"Enjoy this activity description","date":"2022-04-16","location":"a","bookingLink":"https://mvnrepository.com/artifact/org.springframework.security/spring-security-core/5.6.2","categoryId":3} | Saves a new activity                                                                 |
| POST http://localhost:8080/api/activities/search-by-keywords                            | {"keywords":["kayaking","picasso"]}                                                                                                                                                                                                                   | Filters activities by their keywords (checked against their titles)                  |
| POST http://localhost:8080/api/activities/search-by-categories                          | {"categories":["music"]}                                                                                                                                                                                                                              | Filters activities by their categories                                               |
| GET http://localhost:8080/api/categories                                                |                                                                                                                                                                                                                                                       | Returns all categories                                                               |
| POST http://localhost:8080/api/categories/add-new                                       | {"name":"gastronomy"}                                                                                                                                                                                                                                 | Adds a new category                                                                  |
| POST http://localhost:8080/api/login                                                    | {"userEmail":"alex@email.com","password":"passwd"}                                                                                                                                                                                                    | Logs a user in                                                                       |
| GET http://localhost:8080/api/user-activities/all                                       |                                                                                                                                                                                                                                                       | Returns all activities saved for every user                                          |
| GET http://localhost:8080/api/user-activities/?userId={userId}                          |                                                                                                                                                                                                                                                       | Returns all activities saved for a specific user                                     |
| POST http://localhost:8080/api/user-activities/add-new                                  | {"userId":1,"activityId":6}                                                                                                                                                                                                                           | Saves one activity for a specific user                                               |
| DELETE http://localhost:8080/api/user-activities/delete?userActivityId={userActivityId} |                                                                                                                                                                                                                                                       | Deletes a registry of an activity saved for a user                                   |
| POST http://localhost:8080/api/user-activities/search-by-keywords?userId={userId}       | {"keywords":["kayaking","picasso"]}                                                                                                                                                                                                                   | Filters activities saved for a user by their keywords (checked against their titles) |
| POST http://localhost:8080/api/user-activities/search-by-categories?userId={userId}     | {"categories":["culture","outdoors"]}                                                                                                                                                                                                                 | Filters activities saved for a user by their categories                              |
| GET http://localhost:8080/api/users                                                     |                                                                                                                                                                                                                                                       | Returns all users                                                                    |
| POST http://localhost:8080/api/users/register                                           | {"name":"Carles Wong","email":"cwong@email.com","password":"1234"}                                                                                                                                                                                    | Registers a new user                                                                 |



